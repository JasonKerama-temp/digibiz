<script id="communication-group-details-template" type="text/x-handlebars-template">
    <div class="communication-group-create-main-container">
        <div class="row flex-height">
            <div class="communication-group-create-border">
                <div class="communication-group-creation-main-content-box">
                    <div class="communication-group-creation-main-section">
                        <div class="communication-group-creation-group-info-section creation-info-bg-wrapper">
                            {{#if group_data}}
                            <div class="communication-group-group-delete-icon-parent">    
                                <span>Members(#{{totalMembersCount}})</span>
                                <span>Total Members (#{{group_data.totalGroupMembersCount}})</span>
                                <!-- <span class="search-member-button waves-effect"><i class="material-icons">search</i></span>                             -->
                                {{#if is_owner}}   
                                <a id="delete_communication_group" class="right"><i class="material-icons">delete</i></a>     
                                {{/if}}                           
                            </div>
                            {{/if}}
                            <div class="communication-group-info-wrapper creation-info-wrapper">
                                <div class="pdleft">                                        
                                        <div class="multimedia-container">
                                            <div class="multimedia_wrapper">
                                                <div class="identity-picture-wrapper view">
                                                    <img class="group_img attached-img" id="group_image" src="{{group_data.group_image.avtarUrl}}"/>                             
                                                    <div class="mask">
                                                        <!-- {{#if group_data.group_image}}<a class="group_image_preview" data-image-id="{{group_data.group_image.thumbnail}}"><i class="material-icons">pageview</i></a>{{/if}} -->
                                                        {{#if group_data.group_image.avtarUrl}}<a class="info group-image-multimedia-load-btn cursor_pointer"><i class="material-icons" id="group-image-load-btn" data-thumbnail-id="{{group_data.group_image.thumbnail}}">photo_camera</i></a>{{/if}}
                                                        {{#if group_data.group_image.avtarUrl}}
                                                        <a class="info cursor_pointer"><i class="material-icons" id="group-image-delete" data-image-id="{{group_data.group_image.thumbnail}}">delete</i></a>
                                                        {{else}}
                                                        <a class="info group-image-multimedia-load-btn cursor_pointer"><i class="material-icons" id="group-image-load-btn">add</i></a>
                                                        {{/if}}
                                                    </div>
                                                    <input type="file" class="validate" id="group-image-upload" name="multimediaFiles">
                                                </div>
                                             </div> 
                                             <div class="upload-preview-wrapper hide" id="upload-preview-wrapper">
                                                <div class="upload-preview-header">
                                                    <span>Preview</span>
                                                    <button id="upload-preview-close-btn" class="close-preview"><i class="material-icons">close</i></button>
                                                </div>
                                                <div class="upload-preview-container">
                                                    <div class="upload-preview-container-file-preview" id="upload-file-preview"></div>
                                                </div>
                                                <div class="upload-preview-footer hide">              
                                                  <button id="upload-footer-send-btn" class="disabled"><i class="material-icons">send</i></button>
                                                </div>
                                            </div>
                                        </div>
                                </div>                
                                <div class="mt20">
                                        <div class="input-field form-validation">
                                            <input id="communicationGroupName" class="inputform-validation" name="name" type="text" autofocus="" value="{{group_data.name}}">
                                            <label class="active" for="name">Group Name</label>
                                            <i class="material-icons icon-validation-warning" aria-hidden="true">warning</i>
                                            <span class="left-warning-message"></span>
                                        </div>  
                                        <div class="input-field form-validation">
                                            <textarea id="communication_group_desc" class="inputform-validation materialize-textarea" name="description" value="{{group_data.description}}">{{group_data.description}}</textarea>
                                            <label class="active" for="name">Group Description</label>
                                            <i class="material-icons icon-validation-warning" aria-hidden="true">warning</i>
                                            <span class="left-warning-message"></span>
                                        </div>  
                                        <div class="visibility-setting-wrapper">  
                                           
                                            <span class="custom-dropdown-heading">Group Visibility</span>
                                            <div id="group-visibility" class="wrapper-dropdown cursor-pointer" tabindex="1">
                                                {{#if group_data.visibility}}
                                                    <span class="disabled selected-dropdown selected-value-group-visbility" name="group_visibility" data-value="{{group_data.visibility}}">{{#ifcond group_data.visibility '==' 'internal'}} Internal {{/ifcond}}{{#ifcond group_data.visibility '==' 'external'}} External {{/ifcond}}</span>
                                                {{else}}
                                                    <span class="disabled selected-dropdown selected-value-group-visbility" name="group_visibility" data-value="" data-id="">--Select--</span>
                                                {{/if}}
                                                    <ul class="custom-dropdown">             
                                                        <li class="group_visibility" data-value="internal">Internal</li>
                                                        <li class="group_visibility" data-value="external">External</li>
                                                    </ul>
                                            </div>
                                        </div>                                   
                                </div>                                
                            </div>
                        </div>

                        <div class="communication-group-creation-group-moderator-section">
                            <div class="communication-group-creation-moderator-members-contentbox">
                                <div class="communication-group-communication-heading bg-color"><span class="members-title">Group Moderator</span>
                                    <span class="group-moderator-count"> (#{{group_data.moderatorCount}})</span>
                                    <span class="search-moderator-button moderator-lists {{#if group_data}}{{else}} hide {{/if}} waves-effect"><i class="material-icons">search</i></span>
                                    <!-- <span class="search-member-button waves-effect hide"><i class="material-icons">search</i></span> -->
                                    {{#if is_owner}}
                                    <a id="add_communication_group_moderator_members" class="white-text right" title="Add Group Moderator"><i class="material-icons">person_add</i></a>
                                    {{/if}}
                                </div>
                                <div class="communication-group-moderator-members-container">
                                    <div class="communication-group-moderator-members-list" id="communication-group-moderator-members-list">     
                                        <!-- {{#if group_moderator_data}}
                                        {{#each group_moderator_data}}
                                        <div class="communication-group-moderator-member-wrapper" data-id="{{this.id}}" data-type="{{this.type}}" {{#ifcond this.type '==' 'customer'}} data-identifier-id="{{this.data.identifier_id}}" {{/ifcond}} {{#ifcond this.type '==' 'associate_customer'}} data-identifier-id="{{this.data.identifier_id}}" data-parent-customer-id="{{this.data.customer_id}}" data-parent-customer-identifier-id="{{this.data.parent_customer_identifier_id}}" {{/ifcond}} {{#ifcond ../group_data.group_type '==' 'group_list'}} data-group-id="{{this.group_id}}" {{/ifcond}}>
                                            <div class="file-select">                                               
                                                <div class="contact-profile-container profile-pic-container p-{{this.imageLetter}}">
                                                    <img src="{{this.identity_picture.avtarUrl}}" class="chat-avatar-image">
                                                    <span class="persona">{{this.imageLetter}}</span>
                                                </div>
                                            </div>
                                          
                                            <div class= "moderator-data-container">
                                                <span class="custom-communication-group-moderator-member-name wrapper-primary-heading">{{#if this.data.display_name}}{{this.data.display_name}}{{else}}{{this.data.name.first}}&nbsp;{{this.data.name.last}}{{/if}}</span>
                                                {{#ifcond this.type '==' 'employee'}}
                                                <span class="custom-communication-group-moderator-type wrapper-secondary-heading">{{this.type}}</span>
                                               {{/ifcond}}
                                               {{#ifcond this.type '==' 'customer'}}
                                               <div class="filemanager-file-wrapper">
                                                <div class="custom-communication-group-member-information-wrapper">
                                                    <span class="member-second-data wrapper-secondary-heading">{{#if this.role_member_data.identifier_name}}{{this.role_member_data.identifier_name}}{{/if}}{{#if this.role_member_data.label}}&nbsp;|&nbsp;{{this.role_member_data.label}}{{/if}}
                                                     </span>
                                                    {{#if this.role_business_name}}&nbsp;|&nbsp;
                                                    <span class="custom-communication-group-member-role-business-name wrapper-secondary-heading">{{this.role_business_name}}</span>
                                                    {{else}}
                                                    <span class="custom-communication-group-member-role-business-name wrapper-secondary-heading">{{this.business_name}}</span>
                                                    {{/if}}
                                                    {{#ifcond this.role_member_data.customer_type '==' 'associate_customer'}}
                                                    <span class="custom-communication-group-member-info wrapper-secondary-heading">{{#if this.role_member_data.identifierName}}{{this.role_member_data.identifierName}}{{/if}}{{#if this.role_member_data.primaryCustomerData}}&nbsp;|&nbsp;{{this.role_member_data.primaryCustomerData.identifier_name}}&nbsp;|&nbsp;{{#if this.role_member_data.primaryCustomerData.display_name}}{{this.role_member_data.primaryCustomerData.display_name}}{{else}}{{this.role_member_data.primaryCustomerData.name.first}}{{/if}}{{/if}}</span>
                                                    {{/ifcond}}
                                                </div>
                                            </div>
                                               {{/ifcond}}
                                                <span class="custom-communication-group-moderator-group_name wrapper-tertiary-heading">{{this.group_data.name}}</span>
                                                {{#ifcond this.status '==' 'inactive'}}
                                                <span class="group-moderator-name wrapper-secondary-heading status--{{this.status}}">{{this.status}}</span>
                                                {{/ifcond}}
                                                
                                            </div>
                                          
                                        </div>
                                        {{/each}}                                       
                                        {{/if}}                                         -->
                                    </div>
                                </div>                                
                            </div>                            
                        </div>

                        <div class="communication-group-creation-group-members-section">

                            <div class="communication-group-creation-employee-members-contentbox">
                                <div class="communication-group-communication-heading bg-color"><span class="members-title">Employee Members</span>
                                    {{#ifcond group_data.group_type '==' 'contact_list'}}
                                    <span class="group-members-count">(#{{employeeMembersCount}})</span>
                                    {{else}}
                                    <span class="group-members-count">(#{{employeeMembersCount}})</span>
                                    <span class="total-group-members-count">Total Employee Members (#{{group_data.totalEmployeeGroupMembersCount}})</span>
                                    {{/ifcond}}
                                    <span class="search-member-button employee-lists {{#if group_data}}{{else}} hide {{/if}} waves-effect"><i class="material-icons">search</i></span>
                                    {{#if is_owner}}
                                    <a id="add_communication_group_employee_members" class="white-text right" title="Add Employee Members"><i class="material-icons">person_add</i></a>
                                  {{/if}}
                                    <!-- <span class="search-member-button employee-lists waves-effect {{#if group_data}}{{else}} hide {{/if}}"><i class="material-icons">search</i></span> -->
                                </div>
                                <div class="communication-group-members-container">
                                    <div class="communication-group-employee-members-list" id="communication-group-employee-members-list">     
                                        {{#ifcond group_data.group_type '==' 'contact_list'}}
                                        {{#if group_members_data}}
                                        {{#each group_members_data}}
                                        {{#ifcond this.member.type '==' 'employee'}}
                                        <div class="communication-group-member-wrapper member-listing-wrapper" data-employee-id="{{this.member.id}}" data-type="{{this.member.type}}" data-member-id="{{this.id}}">
                                            <div class="file-select">                                               
                                                <div class="contact-profile-container profile-pic-container p-{{this.imageLetter}}">
                                                    <img src="{{this.identity_picture.avtarUrl}}" class="chat-avatar-image">
                                                    <span class="persona">{{this.imageLetter}}</span>
                                                </div>
                                            </div>
                                            <div class="filemanager-file-wrapper">
                                                <span class="communication-group-member-name wrapper-primary-heading">{{#if this.member_display_name}}{{this.member_display_name}}{{else}}{{this.member_name.first}}&nbsp;{{this.member_name.last}}{{/if}}</span>
                                                <span class="member-second-data wrapper-secondary-heading">{{#if this.member_data.business_name}}{{this.member_data.business_name}}{{/if}}{{#if member_data.designation_name}}|{{member_data.designation_name}}{{/if}}</span>
                                            </div>
                                            <div class="btn-wrap">              
                                                <div class="more-menu-wrapper" id="delete_communication_group_employee_member" data-member-id="{{this.id}}"><i class="material-icons">delete</i></div>
                                            </div>
                                        </div>
                                        {{/ifcond}}
                                        {{/each}}                                       
                                        {{/if}}
                                        {{/ifcond}}

                                        {{#ifcond group_data.group_type '==' 'group_list'}}
                                        {{#if group_members_data}}
                                        {{#each group_members_data}}
                                        {{#ifcond this.member.type '==' 'employee_group'}}
                                        <div class="communication-group-member-wrapper member-listing-wrapper" data-member-id="{{this.id}}" data-group-id="{{this.member.id}}">
                                            <div class="file-select">                                               
                                                <div class="contact-profile-container profile-pic-container p-{{imageLetter}}">
                                                    <img src="{{this.group_image.avtarUrl}}" class="chat-avatar-image">
                                                    <span class="persona">{{imageLetter}}</span>
                                                </div>
                                            </div>
                                            <div class="filemanager-file-wrapper">
                                                <span class="communication-group-member-name wrapper-primary-heading">{{#if this.member_name}}{{this.member_name}}{{/if}}(#{{memberGroupMembersCount}})</span>
                                                {{#ifcond this.status.status '==' 'inactive'}}
                                                <span class="communication-group-member-name wrapper-secondary-heading status--{{this.status.status}}">{{this.status.status}}</span>
                                                {{/ifcond}}
                                            </div>
                                            {{#if ../is_owner}}        
                                            <div class="btn-wrap">              
                                                <div class="more-menu-wrapper" id="delete_communication_group_employee_group_member" data-group-id="{{this.id}}"><i class="material-icons">delete</i></div>
                                            </div>
                                            {{/if}}
                                        </div>
                                        {{/ifcond}}
                                        {{/each}}                                       
                                        {{/if}}
                                        {{/ifcond}}                                        
                                    </div>
                                </div>                                
                            </div>

                            {{#ifcond communication_group_type '==' 'group_list'}}
                            <div class="communication-group-creation-collaborator-members-contentbox">
                                <div class="communication-group-communication-heading bg-color"><span class="members-title">Collaborator Members</span>
                                    <span class="group-members-count">(#{{collaboratorMembersCount}})</span>
                                    <span class="total-group-members-count">Total Collaborator Members (#{{group_data.totalCollaboratorGroupMembersCount}})</span>
                                    <span class="search-member-button collaborator-lists {{#if group_data}}{{else}} hide {{/if}} waves-effect"><i class="material-icons">search</i></span>
                                    {{#if is_owner}}
                                    <a id="add_communication_group_collaborator_members" class="white-text right" title="Add Collaborator Members"><i class="material-icons">person_add</i></a>
                                    {{/if}}
                                </div>
                                <div class="communication-group-members-container">
                                    <div class="communication-group-collaborator-members-list" id="communication-group-collaborator-members-list">   
                                                                    
                                        {{#ifcond group_data.group_type '==' 'group_list'}}
                                        {{#if group_collaborator_members_data}}
                                        {{#each group_collaborator_members_data}}
                                        {{#ifcond this.member.type '==' 'collaborator_group'}}
                                        <div class="communication-group-member-wrapper member-listing-wrapper" data-member-id="{{this.id}}" data-group-id="{{this.member.id}}">
                                            <div class="file-select">                                               
                                                <div class="contact-profile-container profile-pic-container p-{{imageLetter}}">
                                                    <img src="{{this.group_image.avtarUrl}}" class="chat-avatar-image">
                                                    <span class="persona">{{imageLetter}}</span>
                                                </div>
                                            </div>
                                            <div class="filemanager-file-wrapper">
                                                <span class="communication-group-member-name wrapper-primary-heading">{{#if this.member_name}}{{this.member_name}}{{/if}}(#{{memberGroupMembersCount}})</span>
                                                {{#ifcond this.status.status '==' 'inactive'}}
                                                <span class="communication-group-member-name wrapper-secondary-heading status--{{this.status.status}}">{{this.status.status}}</span>
                                                {{/ifcond}}
                                            </div>
                                            {{#if ../is_owner}}    
                                            <div class="btn-wrap">              
                                                <div class="more-menu-wrapper" id="delete_communication_group_collaborator_group_member" data-group-id="{{this.id}}"><i class="material-icons">delete</i></div>
                                            </div>
                                            {{/if}}
                                        </div>
                                        {{/ifcond}}
                                        {{/each}}                                       
                                        {{/if}}
                                        {{/ifcond}}

                                        
                                    </div>
                                </div>                                
                            </div>
                            {{/ifcond}}

                            <div class="communication-group-creation-customer-members-contentbox">
                                <div class="communication-group-communication-heading bg-color"><span class="members-title">Customer Members</span>
                                  
                                    {{#ifcond group_data.group_type '==' 'contact_list'}}
                                    <span class="group-members-count">(#{{customerMembersCount}})</span>
                                    {{else}}
                                    <span class="group-members-count">(#{{customerMembersCount}})</span>
                                    <span class="total-group-members-count">Total Customer Members (#{{group_data.totalCustomerGroupMembersCount}})</span>
                                    {{/ifcond}}
                                    <span class="search-member-button customer-lists {{#if group_data}}{{else}} hide {{/if}} waves-effect"><i class="material-icons">search</i></span>
                                    {{#if is_owner}}
                                    <a id="add_communication_group_customer_members" class="white-text right" title="Add Customer Members"><i class="material-icons">person_add</i></a>
                                   {{/if}}
                                    <!-- <span class="search-member-button waves-effect {{#if group_data}}{{else}} hide {{/if}}"><i class="material-icons">search</i></span> -->
                                </div>
                                <div class="communication-group-members-container">
                                    <div class="communication-group-customer-members-list" id="communication-group-customer-members-list">                             

                                        {{#ifcond group_data.group_type '==' 'contact_list'}}
                                        {{#if group_customer_members_data}}
                                        {{#each group_customer_members_data}}
                                        {{#ifcond this.member.type '==' 'customer'}}
                                        <div class="communication-group-member-wrapper member-listing-wrapper" data-customer-id="{{this.member.id}}" data-type="{{this.member.type}}" data-customer-type="{{this.member.customer_type}}" data-member-id="{{this.id}}" data-identifier-id="{{this.member.identifier_id}}" data-role-id="{{this.member_data.role.id}}" data-role-type="{{this.member_data.role.type}}" data-role-business-id="{{this.member_data.role.business_id}}" {{#ifcond this.member.customer_type '==' 'associate_customer'}} data-parent-customer-id="{{this.member.parent_customer_id}}" data-parent-customer-identifier-id="{{this.parent_customer_identifier_id}}" {{/ifcond}}>
                                            <div class="file-select">                                               
                                                <div class="contact-profile-container profile-pic-container p-{{this.imageLetter}}">
                                                    <img src="{{this.identity_picture.avtarUrl}}" class="chat-avatar-image">
                                                    <span class="persona">{{this.imageLetter}}</span>
                                                </div>
                                            </div>
                                            <div class="filemanager-file-wrapper">
                                                <div class="custom-communication-group-member-information-wrapper">
                                                    <span class="custom-communication-group-member-name wrapper-primary-heading">{{#if this.member_display_name}}{{this.member_display_name}}{{else}}{{this.member_name.first}}&nbsp;{{this.member_name.last}}{{/if}}</span>
                                                    <span class="member-second-data wrapper-secondary-heading">{{#if this.member_data.identifier_name}}{{this.member_data.identifier_name}}{{/if}}{{#if this.member_data.label}}&nbsp;|&nbsp;{{this.member_data.label}}{{/if}}
                                                     </span>
                                                    {{#if this.role_business_name}}&nbsp;|&nbsp;
                                                    <span class="custom-communication-group-member-role-business-name wrapper-secondary-heading">{{this.role_business_name}}</span>
                                                    {{else}}
                                                    <span class="custom-communication-group-member-role-business-name wrapper-secondary-heading">{{this.business_name}}</span>
                                                    {{/if}}
                                                    {{#ifcond this.member.customer_type '==' 'associate_customer'}}
                                                    <span class="custom-communication-group-member-info wrapper-secondary-heading">{{#if this.member_data.identifierName}}{{this.member_data.identifierName}}{{/if}}{{#if this.member_data.primaryCustomerData}}&nbsp;|&nbsp;{{this.member_data.primaryCustomerData.identifier_name}}&nbsp;|&nbsp;{{#if this.member_data.primaryCustomerData.display_name}}{{this.member_data.primaryCustomerData.display_name}}{{else}}{{this.member_data.primaryCustomerData.name.first}}{{/if}}{{/if}}</span>
                                                    {{/ifcond}}
                                                </div>
                                            </div>
                                            <div class="btn-wrap">              
                                                <div class="more-menu-wrapper" id="delete_communication_group_customer_member" data-member-id="{{this.id}}"><i class="material-icons">delete</i></div>
                                            </div>
                                        </div>
                                        {{/ifcond}}
                                        {{/each}}                                       
                                        {{/if}}
                                        {{/ifcond}}

                                        {{#ifcond group_data.group_type '==' 'group_list'}}
                                        {{#if group_customer_members_data}}
                                        {{#each group_customer_members_data}}
                                        {{#ifcond this.member.type '==' 'customer_group'}}
                                        <div class="communication-group-member-wrapper member-listing-wrapper" data-member-id="{{this.id}}" data-group-id="{{this.member.id}}">
                                            <div class="file-select">                                               
                                                <div class="contact-profile-container profile-pic-container p-{{imageLetter}}">
                                                    <img src="{{this.group_image.avtarUrl}}" class="chat-avatar-image">
                                                    <span class="persona">{{imageLetter}}</span>
                                                </div>
                                            </div>
                                            <div class="filemanager-file-wrapper">
                                                <span class="communication-group-member-name wrapper-primary-heading">{{#if this.member_name}}{{this.member_name}}{{/if}}(#{{memberGroupMembersCount}})</span>
                                                {{#ifcond this.status.status '==' 'inactive'}}
                                                <span class="communication-group-member-name wrapper-secondary-heading status--{{this.status.status}}">{{this.status.status}}</span>
                                                {{/ifcond}}
                                            </div>
                                            <div class="btn-wrap">   
                                                {{#if ../is_owner}}         
                                                <div class="more-menu-wrapper" id="delete_communication_group_customer_group_member" data-group-id="{{this.id}}"><i class="material-icons">delete</i></div>
                                                {{/if}}
                                            </div>
                                        </div>
                                        {{/ifcond}}
                                        {{/each}}                                       
                                        {{/if}}
                                        {{/ifcond}}

                                        
                                    </div>
                                </div>                                
                            </div>  

                        </div>
                    </div>
                    
                    <div class="create-survey-btn-wrapper group-save-cancel-container">
                        <div class="group-save-cancel-wrapper">
                            <a class="button-btn btn-save secondary-color-button cursor-pointer" id="communication_group_cancel_button"><i class="material-icons">cancel</i><span>Cancel</span></a>
                            <a class="button-btn btn-save primary-color-button cursor-pointer" id="communication_group_save_button"><i class="material-icons">save</i><span>Save</span></a>
                        </div>
                    </div>
                    
                </div>
            </div>
        </div>
    </div>
</script>