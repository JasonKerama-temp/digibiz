cordova.define("cordova-plugin-file.FileWriter",(function(t,e,n){const r=t("cordova/exec"),o=t("./FileError"),i=t("./FileReader"),a=t("./ProgressEvent"),s=function(t){this.fileName="",this.length=0,t&&(this.localURL=t.localURL||t,this.length=t.size||0),this.position=0,this.readyState=0,this.result=null,this.error=null,this.onwritestart=null,this.onprogress=null,this.onwrite=null,this.onwriteend=null,this.onabort=null,this.onerror=null};s.INIT=0,s.WRITING=1,s.DONE=2,s.prototype.abort=function(){if(this.readyState===s.DONE||this.readyState===s.INIT)throw new o(o.INVALID_STATE_ERR);this.error=new o(o.ABORT_ERR),this.readyState=s.DONE,"function"==typeof this.onabort&&this.onabort(new a("abort",{target:this})),"function"==typeof this.onwriteend&&this.onwriteend(new a("writeend",{target:this}))},s.prototype.write=function(t,e){const n=this,w=void 0!==window.Blob&&void 0!==window.ArrayBuffer,f="windows"===cordova.platformId;if(t instanceof File||!f&&w&&t instanceof Blob){const e=new i;return e.onload=function(){s.prototype.write.call(n,this.result,!0)},e.onerror=function(){n.readyState=s.DONE,n.error=this.error,"function"==typeof n.onerror&&n.onerror(new a("error",{target:n})),"function"==typeof n.onwriteend&&n.onwriteend(new a("writeend",{target:n}))},this.readyState=s.WRITING,void(w?e.readAsArrayBuffer(t):e.readAsText(t))}const h=w&&t instanceof ArrayBuffer;if(this.readyState===s.WRITING&&!e)throw new o(o.INVALID_STATE_ERR);this.readyState=s.WRITING;const d=this;"function"==typeof d.onwritestart&&d.onwritestart(new a("writestart",{target:d})),r((function(t){d.readyState!==s.DONE&&(d.position+=t,d.length=d.position,d.readyState=s.DONE,"function"==typeof d.onwrite&&d.onwrite(new a("write",{target:d})),"function"==typeof d.onwriteend&&d.onwriteend(new a("writeend",{target:d})))}),(function(t){d.readyState!==s.DONE&&(d.readyState=s.DONE,d.error=new o(t),"function"==typeof d.onerror&&d.onerror(new a("error",{target:d})),"function"==typeof d.onwriteend&&d.onwriteend(new a("writeend",{target:d})))}),"File","write",[this.localURL,t,this.position,h])},s.prototype.seek=function(t){if(this.readyState===s.WRITING)throw new o(o.INVALID_STATE_ERR);(t||0===t)&&(t<0?this.position=Math.max(t+this.length,0):t>this.length?this.position=this.length:this.position=t)},s.prototype.truncate=function(t){if(this.readyState===s.WRITING)throw new o(o.INVALID_STATE_ERR);this.readyState=s.WRITING;const e=this;"function"==typeof e.onwritestart&&e.onwritestart(new a("writestart",{target:this})),r((function(t){e.readyState!==s.DONE&&(e.readyState=s.DONE,e.length=t,e.position=Math.min(e.position,t),"function"==typeof e.onwrite&&e.onwrite(new a("write",{target:e})),"function"==typeof e.onwriteend&&e.onwriteend(new a("writeend",{target:e})))}),(function(t){e.readyState!==s.DONE&&(e.readyState=s.DONE,e.error=new o(t),"function"==typeof e.onerror&&e.onerror(new a("error",{target:e})),"function"==typeof e.onwriteend&&e.onwriteend(new a("writeend",{target:e})))}),"File","truncate",[this.localURL,t])},n.exports=s}));