cordova.define("cordova-plugin-background-download.Promise",(function(e,t,i){!function(e){function s(){this._completeCallbacks=[],this._errorCallbacks=[],this._progressCallbacks=[],this._chainedDefer=null,this._state="pending",this.result=null}function n(){this.promise=new s}s.Deferral=n,s.prototype.then=function(e,t,i){return e&&this._completeCallbacks.push(e),t&&this._errorCallbacks.push(t),i&&this._progressCallbacks.push(i),this._chainedDefer=new s.Deferral,this._chainedDefer.promise.parent=this,"resolved"===this._state?this.executeCallback(e,this.result):"rejected"===this._state&&this.executeCallback(t,this.result),this._chainedDefer.promise},s.prototype.cancel=function(e){if(null==this.parent||e){if("pending"===this._state){this._state="cancelled";var t=this,i=new Error("Cancelled");this.result=i,this._errorCallbacks.forEach((function(e){t.executeCallback(e,i)})),this.onCancelled&&this.onCancelled(),this._chainedDefer&&this._chainedDefer.promise.cancel(!0)}}else{for(var s=this;s.parent;)s=s.parent;window.setTimeout((function(){s.cancel(!0)}))}},s.prototype.executeCallback=function(e,t){var i=this._chainedDefer;state=this._state,window.setTimeout((function(){var n;try{n=e(t)}catch(e){return void(i&&i.reject(e))}null!=i&&"cancelled"!==state&&(n instanceof s?i.bind(n):i.resolve(n))}))},n.prototype.resolve=function(e){if("pending"===this.promise._state){var t=this.promise;t._state="resolved",t.result=e,t._completeCallbacks.forEach((function(i){t.executeCallback(i,e)}))}},n.prototype.reject=function(e){if("pending"===this.promise._state){var t=this.promise;t._state="rejected",t.result=e,t._errorCallbacks.forEach((function(i){t.executeCallback(i,e)}))}},n.prototype.notify=function(e){"cancelled"!==this.promise._state&&this.promise._progressCallbacks.forEach((function(t){window.setTimeout((function(){t(e)}))}))},n.prototype.bind=function(e){var t=this;e.then((function(e){t.resolve(e)}),(function(e){t.reject(e)}))},"object"==typeof t?i.exports=s:"function"==typeof define&&define.amd?define((function(){return s})):e.Promise=s}(this)}));