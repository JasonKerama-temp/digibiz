cordova.define("cordova-plugin-file.FileReader",(function(t,r,e){const s=t("cordova/exec"),o=t("cordova/modulemapper"),n=t("cordova/utils"),i=t("./FileError"),a=t("./ProgressEvent"),l=o.getOriginalSymbol(window,"FileReader"),d=function(){this._readyState=0,this._error=null,this._result=null,this._progress=null,this._localURL="",this._realReader=l?new l:{}};function h(t){n.defineGetterSetter(d.prototype,t,(function(){return this._realReader[t]||null}),(function(r){this._realReader[t]=r}))}function u(t,r){if(t.readyState===d.LOADING)throw new i(i.INVALID_STATE_ERR);if(t._result=null,t._error=null,t._progress=0,t._readyState=d.LOADING,"string"!=typeof r.localURL)return t._localURL="",!0;t._localURL=r.localURL,t.onloadstart&&t.onloadstart(new a("loadstart",{target:t}))}function _(t,r,e,o,n,i){if(this._readyState===d.DONE)return;let l=d.READ_CHUNK_SIZE;if("readAsDataURL"===t&&(l="windows"===cordova.platformId?o:d.READ_CHUNK_SIZE-d.READ_CHUNK_SIZE%3+3),void 0!==i&&(n(i),this._progress=Math.min(this._progress+l,o),"function"==typeof this.onprogress&&this.onprogress(new a("progress",{loaded:this._progress,total:o}))),void 0===i||this._progress<o){const i=[this._localURL,e+this._progress,e+this._progress+Math.min(o-this._progress,l)];r&&i.splice(1,0,r),s(_.bind(this,t,r,e,o,n),f.bind(this),"File",t,i)}else this._readyState=d.DONE,"function"==typeof this.onload&&this.onload(new a("load",{target:this})),"function"==typeof this.onloadend&&this.onloadend(new a("loadend",{target:this}))}function f(t){this._readyState!==d.DONE&&(this._readyState=d.DONE,this._result=null,this._error=new i(t),"function"==typeof this.onerror&&this.onerror(new a("error",{target:this})),"function"==typeof this.onloadend&&this.onloadend(new a("loadend",{target:this})))}d.READ_CHUNK_SIZE=262144,d.EMPTY=0,d.LOADING=1,d.DONE=2,n.defineGetter(d.prototype,"readyState",(function(){return this._localURL?this._readyState:this._realReader.readyState})),n.defineGetter(d.prototype,"error",(function(){return this._localURL?this._error:this._realReader.error})),n.defineGetter(d.prototype,"result",(function(){return this._localURL?this._result:this._realReader.result})),h("onloadstart"),h("onprogress"),h("onload"),h("onerror"),h("onloadend"),h("onabort"),d.prototype.abort=function(){if(l&&!this._localURL)return this._realReader.abort();this._result=null,this._readyState!==d.DONE&&this._readyState!==d.EMPTY&&(this._readyState=d.DONE,"function"==typeof this.onabort&&this.onabort(new a("abort",{target:this})),"function"==typeof this.onloadend&&this.onloadend(new a("loadend",{target:this})))},d.prototype.readAsText=function(t,r){if(u(this,t))return this._realReader.readAsText(t,r);const e=r||"UTF-8",s=t.end-t.start;_.bind(this)("readAsText",e,t.start,s,function(t){0===this._progress&&(this._result=""),this._result+=t}.bind(this))},d.prototype.readAsDataURL=function(t){if(u(this,t))return this._realReader.readAsDataURL(t);const r=t.end-t.start;_.bind(this)("readAsDataURL",null,t.start,r,function(t){const r=t.indexOf(",");0===this._progress?this._result=t:this._result+=t.substring(r+1)}.bind(this))},d.prototype.readAsBinaryString=function(t){if(u(this,t))return this._realReader.readAsBinaryString(t);const r=t.end-t.start;_.bind(this)("readAsBinaryString",null,t.start,r,function(t){0===this._progress&&(this._result=""),this._result+=t}.bind(this))},d.prototype.readAsArrayBuffer=function(t){if(u(this,t))return this._realReader.readAsArrayBuffer(t);const r=t.end-t.start;_.bind(this)("readAsArrayBuffer",null,t.start,r,function(t){const e=0===this._progress?new Uint8Array(r):new Uint8Array(this._result);e.set(new Uint8Array(t),this._progress),this._result=e.buffer}.bind(this))},e.exports=d}));