cordova.define("cordova-plugin-file-transfer.FileTransfer",(function(e,o,n){const t=e("cordova/argscheck"),r=e("cordova/exec"),l=e("./FileTransferError"),s=e("cordova-plugin-file.ProgressEvent");function i(e){const o=new s;return o.lengthComputable=e.lengthComputable,o.loaded=e.loaded,o.total=e.total,o}function a(e){const o=/^https?:\/\/(?:(?:(([^:@/]*)(?::([^@/]*))?)?@)?([^:/?#]*)(?::(\d*))?).*$/.exec(e);return o&&o[1]}function c(e){let o=null;if(window.btoa){const n=a(e);if(n){o={name:"Authorization",value:"Basic "+window.btoa(n)}}}return o}function u(e){const o=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const t=e[n];o.push({name:n,value:t.toString()})}return o}let d=0;const p=function(){this._id=++d,this.onprogress=null};p.prototype.upload=function(e,o,n,s,d,p){t.checkArgs("ssFFO*","FileTransfer.upload",arguments);let f=null,h=null,m=null,g=null,w=!0,y=null,v=null;const F=c(o);F&&(o=o.replace(a(o)+"@",""),(d=d||{}).headers=d.headers||{},d.headers[F.name]=F.value),d&&(f=d.fileKey,h=d.fileName,m=d.mimeType,y=d.headers,v=d.httpMethod||"POST",v="PUT"===v.toUpperCase()?"PUT":"POST",null===d.chunkedMode&&void 0===d.chunkedMode||(w=d.chunkedMode),g=d.params?d.params:{}),"windowsphone"===cordova.platformId&&(y=y&&u(y),g=g&&u(g));const T=this;r((function(e){void 0!==e.lengthComputable?T.onprogress&&T.onprogress(i(e)):n&&n(e)}),s&&function(e){const o=new l(e.code,e.source,e.target,e.http_status,e.body,e.exception);s(o)},"FileTransfer","upload",[e,o,f,h,m,g,p,w,y,this._id,v])},p.prototype.download=function(o,n,s,d,p,f){t.checkArgs("ssFF*","FileTransfer.download",arguments);const h=this,m=c(o);m&&(o=o.replace(a(o)+"@",""),(f=f||{}).headers=f.headers||{},f.headers[m.name]=m.value);let g=null;f&&(g=f.headers||null),"windowsphone"===cordova.platformId&&g&&(g=u(g));r((function(o){if(void 0!==o.lengthComputable){if(h.onprogress)return h.onprogress(i(o))}else if(s){let n=null;o.isDirectory?n=new(e("cordova-plugin-file.DirectoryEntry")):o.isFile&&(n=new(e("cordova-plugin-file.FileEntry"))),n.isDirectory=o.isDirectory,n.isFile=o.isFile,n.name=o.name,n.fullPath=o.fullPath,n.filesystem=new FileSystem(o.filesystemName||(o.filesystem===window.PERSISTENT?"persistent":"temporary")),n.nativeURL=o.nativeURL,s(n)}}),d&&function(e){const o=new l(e.code,e.source,e.target,e.http_status,e.body,e.exception);d(o)},"FileTransfer","download",[o,n,p,this._id,g])},p.prototype.abort=function(){r(null,null,"FileTransfer","abort",[this._id])},n.exports=p}));